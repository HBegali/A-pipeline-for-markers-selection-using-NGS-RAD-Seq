PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX improvit: <http://www.project-improvit.de/vocab/>
PREFIX prov: <http://www.w3.org/ns/prov#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX : <urn:webprotege:ontology:dec69232-c5ce-465d-879a-e1db80698e56#>
SELECT DISTINCT ?donorID ?ageD0 ?sex ?parameterID ?measurementValue
{
    ?parameterID rdf:type improvit:Parameter .
    FILTER (?parameterID = <http://www.project-improvit.de/Parameter/HBsAg>
    || ?parameterID = <http://www.project-improvit.de/Parameter/HBcrAg>)

    ?parameterID improvit:parameterLeadsToResults ?leadsToResultsId .
    ?leadsToResultsId rdf:type improvit:LeadsToResults .
    ?leadsToResultsId improvit:hasPersonID ?donorID .
    ?leadsToResultsId improvit:measurementLeadsToResults ?measurementIds .
    ?measurementIds rdf:type improvit:Measurement .
    ?measurementIds improvit:hasBiosampleDayDescription <http://www.project-improvit.de/Donate/Day0>.
 	    ?measurementIds improvit:hasExpProtocolName ?expProtocolName .
    FILTER (?expProtocolName = <http://www.project-improvit.de/ExperimentalProtocol/Measurement_Of_HBsAg_Level>
     || ?expProtocolName = <http://www.project-improvit.de/ExperimentalProtocol/Measurement_Of_HBcrAg_Level>)
    ?measurementIds improvit:hasMeasurementValue ?measurementValue .
    ?measurementIds improvit:hasMeasurementDescription ?measurementDescription .
    ?measurementIds improvit:hasMeasurementCategorization ?measurementCategorization .
    ?measurementIds improvit:hasMeasurementValueUnit ?measurementValueUnit .
    ?measurementIds improvit:hasNormalRangeOfValue ?normalRangeOfValue .
    ?measurementIds improvit:hasImmuneResponse ?immuneResponse .
    ?donorID rdf:type improvit:Donor .
    ?donorID owl:sameAs ?personID .
    ?personID rdf:type improvit:Person .
    ?personID improvit:hasSex ?sex .
    ?personID improvit:hasAge ?ageD0 .
    ?personID improvit:hasBaselineVisitDay ?DO_day .
    ?personID improvit:hasBaselineVisitMonth ?DO_month .
    ?personID improvit:hasBaselineVisitYear ?DO_year .

}
ORDER BY ?donorID
